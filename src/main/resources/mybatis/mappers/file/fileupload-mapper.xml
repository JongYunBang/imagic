<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fileupload">
	
	<!-- 디렉토리가 있는지 확인하는 쿼리 -->
	<select id="isDir" parameterType="bit.project.imagic.vo.FileVO" resultType="int">
		select count(*) from dir
		where dir_m_id=#{m_id} 
			and dir_name=#{dirName}
	</select>
	
	<!-- 해당 유저의 디렉토리 목록불러오기 -->
	<select id="selectDir" parameterType="bit.project.imagic.vo.FileVO" resultType="java.lang.String">
		select dir_name as dirList from dir 
		where dir_m_id=#{m_id}
	</select>
	
	<!-- 디렉토리 생성하는 쿼리 -->
	<insert id="dirCreate" parameterType="bit.project.imagic.vo.FileVO" >
	 <!-- 열우 2014. 12. 6 일 (12:51) : dir_src Field에 저장하지 않았음 
	
			이전 소스(종윤이형 작업)
			insert into dir(dir_m_id, dir_name) values(
			#{m_id},
			#{dirName}
			)
 	-->	
			insert into dir(dir_m_id, dir_name, dir_src) values(
			#{m_id},
			#{dirName}
			#{dirSrc}
			) 	
 </insert>
	
	<!-- 폴더이름 변경하는 쿼리 -->
	<update id="renameDir" parameterType="bit.project.imagic.vo.FileVO" >
		UPDATE dir
		SET dir_name=#{dirRename}
		WHERE dir_m_id=#{m_id}
			and dir_name=#{dirName}
	</update>

	<!-- 폴더 삭제 하는 쿼리 -->
	<delete id="deleteDir" parameterType="bit.project.imagic.vo.FileVO" >
		delete from dir
		where dir_m_id=#{m_id}
			and dir_name=#{dirName}
	</delete>
	
	
	
	
</mapper>















