<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fileupload">
	
	<!-- 디렉토리가 있는지 확인하는 쿼리 -->
	<select id="isDir" parameterType="bit.project.imagic.vo.FileVO" resultType="int">
		select count(*) from dir
		where dir_m_id=#{m_id} 
			and dir_name=#{dirName}
	</select>
	
	<!-- 해당 유저의 디렉토리 목록불러오기 -->
	<select id="selectDir" parameterType="bit.project.imagic.vo.FileVO" resultType="java.lang.String">
		select dir_name as dirList from dir 
		where dir_m_id=#{m_id}
	</select>
	
	<!-- 디렉토리 생성하는 쿼리 -->
	<insert id="dirCeate" parameterType="bit.project.imagic.vo.FileVO" > 
		insert into dir(dir_m_id, dir_name, dir_src) values(
			#{m_id},
			#{dirName},
			#{dirSrc}
			)
	</insert>
	
	<update id="renameDir" parameterType="bit.project.imagic.vo.FileVO" >
		UPDATE dir
		SET dir_name=#{dirRename}
		WHERE dir_m_id=#{m_id}
			and dir_name=#{dirName};
	</update>

	
	
	
	
	
</mapper>















